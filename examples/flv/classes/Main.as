package{	import fl.controls.Button;	import gs.TweenMax;	import gs.display.GSSprite;	import gs.display.flv.FLV;	import gs.easing.Quad;	import gs.events.FLVEvent;	import gs.events.PreloadProgressEvent;	import gs.preloading.Asset;	import gs.preloading.Preloader;	import gs.util.EventHandler;	import flash.display.MovieClip;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.text.TextField;	import flash.utils.setTimeout;	public class Main extends GSSprite	{				private var flv:FLV;		private var pc:Preloader;		public var playb:Button;		public var pauseb:Button;		public var resume:Button;		public var bar:MovieClip;		public var seekToPercent:Button;		public var seekToPx:Button;		public var stopb:Button;		public var buffer:MovieClip;		public var play1:Button;		public var play2:Button;		public var pbar:MovieClip;		public var prelabel:TextField;		private var tto:Function;		private var flvHandler:EventHandler;		public function Main()		{			super();			init();		}				protected function init():void		{			tto=TweenMax.to;			stage.scaleMode = "noScale";			flv = new FLV();			//flv.traceStatuses = true;			addChild(flv.video);			playb.addEventListener(MouseEvent.CLICK,onPlayClick);			pauseb.addEventListener(MouseEvent.CLICK,onPauseClick);			resume.addEventListener(MouseEvent.CLICK,onResumeClick);			seekToPx.addEventListener(MouseEvent.CLICK,onPXClick);			seekToPercent.addEventListener(MouseEvent.CLICK,onPCClick);			stopb.addEventListener(MouseEvent.CLICK,onStopClick);			play1.addEventListener(MouseEvent.CLICK,onPlay1Click);			play2.addEventListener(MouseEvent.CLICK,onPlay2Click);			flvHandler = new EventHandler(flv,this,"onFLV");			pc=new Preloader(349);			pc.addItems([new Asset("gears_madworld.flv","madworld"),new Asset("adidas_carry.flv","adidas")]);			pc.addEventListener(Event.COMPLETE,onPRLComplete);			pc.addEventListener(PreloadProgressEvent.PROGRESS,onPRLProgress);			pc.start();		}				public function onPRLProgress(ppe:PreloadProgressEvent):void		{			if(pbar.width == ppe.pixels) return;			tto(pbar,.3,{width:ppe.pixels,ease:Quad.easeIn,overwrite:true});			if(ppe.percent>=100) setTimeout(hidePreload,300);		}				public function onPRLComplete(e:*):void		{			onPlay1Click();		}				private function hidePreload():void		{			TweenMax.sequence(pbar,[{time:.2,tint:0xFF0066},{delay:.2,time:.1,autoAlpha:0}]);			tto(prelabel,.3,{delay:.4,autoAlpha:0});		}		public function onPlay1Click(e:* =null):void		{			flv.load("gears_madworld.flv",320,240,4,true);		}				public function onPlay2Click(e:* =null):void		{			flv.load("adidas_carry.flv",320,240,4,true);		}				public function onFLVMeta(fe:FLVEvent):void		{			//trace("META DATA");			//trace(fe.metadata);		}				public function onFLVProgress(fe:FLVEvent):void		{			//trace("PROGRESS","[%LOADED: "+fe.percentLoaded,"] [%BUFFERED: "+fe.percentBuffered,"] [PXPLAYED: "+fe.pixelsPlayed,"] [PXBUFFERED: "+fe.pixelsBuffered+"]");			bar.width = fe.pixelsPlayed;			buffer.width = fe.pixelsBuffered;		}				public function onFLVBufferFull():void		{			flv.resume();		}				public function onFLVBufferEmpty():void		{			flv.pause();		}		public function onFLVStop():void		{			//trace("stopped");		}		public function onFLVStart():void		{			//trace("started");		}				public function onFLVStreamNotFound(fe:FLVEvent):void		{			//trace("not found",fe.url);		}		public function onFLVSeekNotify():void		{			//trace("seeked");		}		
		public function onStopClick(e:*):void		{			flv.stop();		}				public function onPCClick(e:*):void		{			flv.seekToPercent(50);		}				public function onPXClick(e:*):void		{			flv.seekToPixel(40);		}		public function onPlayClick(e:*):void		{			flv.play();		}				public function onPauseClick(e:*):void		{			flv.pause();		}				public function onResumeClick(e:*):void		{			flv.resume();		}	}}